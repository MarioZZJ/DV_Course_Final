<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--
    <link href="./static/css/bootstrap.min.css" rel="stylesheet" />
    <script src="./static/js/echarts.min.js" type="text/javascript"></script>
    <script src="./static/js/bootstrap.min.js" type="text/javascript"></script>
-->
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@4/dist/echarts.min.js"></script>
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl@1/dist/echarts-gl.min.js"></script>
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat@1/dist/ecStat.min.js"></script>
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@4/dist/extension/dataTool.min.js"></script>
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@4/map/js/china.js"></script>
   <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@4/map/js/world.js"></script>
    <script src="https://how2j.cn/study/jquery.min.js"></script>
</head>
<body>
<div id="graph" class="display-flex">
<div id="calendar" style="width:1440px;height:300px;border:2px solid black;">Place Calendar Here</div>
<div id="pie" style="width:600px;height:400px;border:2px solid black;float:left">Place Pie Charts Here</div>
<div id="stack" style="width:600px;height:400px;border:2px solid black;float:left">Place Stack Charts Here</div>
</div>
<script>
    var dom = document.getElementById("calendar");
    var calendar = echarts.init(dom);
    var app = {};
    option = null;
    function getVirtulData(year) {
        year = year || '2008';
        var date = +echarts.number.parseDate(year + '-01-01');
        var end = +echarts.number.parseDate((+year + 1) + '-01-01');
        var dayTime = 3600 * 24 * 1000;
        var data = [];
        for (var time = date; time < end; time += dayTime) {
            data.push([
                echarts.format.formatTime('yyyy-MM-dd', time),
                Math.floor(Math.random() * 1000)
            ]);
        }
        return data;
    }

    option = {
        tooltip: {
            position: 'top'
        },
        visualMap: {
            min: 0,
            max: 1000,
            calculable: true,
            orient: 'horizontal',
            left: 'center',
            top: 'top'
        },

        calendar: [{
            range: '2008',
            cellSize: ['auto', 20]
        }],

        series: [{
            type: 'heatmap',
            coordinateSystem: 'calendar',
            calendarIndex: 0,
            data: getVirtulData(2008)
        }]

    };
    ;
    if (option && typeof option === "object") {
        calendar.setOption(option, true);
    }
    calendar.on('click',function(params){
            var date = +echarts.number.parseDate(2008 + '-01-01');
            var end = +echarts.number.parseDate((+2008 + 1) + '-01-01');
            var dayTime = 3600 * 24 * 1000;
            var day = params.dataIndex
            date = date + day*dayTime;
            var time = echarts.format.formatTime('yyyy-MM-dd', date)
            postit(time)
            })
</script>
<script>
    var dom = document.getElementById("pie");
    var pieChart = echarts.init(dom);
    var app = {};
    option = null;
    var data = [{
        name: 'Apples',
        value: 70
    }, {
        name: 'Strawberries',
        value: 68
    }, {
        name: 'Bananas',
        value: 48
    }, {
        name: 'Oranges',
        value: 40
    }, {
        name: 'Pears',
        value: 32
    }, {
        name: 'Pineapples',
        value: 27
    }, {
        name: 'Grapes',
        value: 18
    }];

    option = {
        title: [{
            text: 'Pie label alignTo'
        }, {
            subtext: 'alignTo: "none" (default)',
            left: '10%',
            top: '10%',
            textAlign: 'center'
        }],
        series: [{
            type: 'pie',
            radius: '60%',
            center: ['50%', '50%'],
            data: data,
            animation: true,
            label: {
                position: 'outer',
                alignTo: 'none',
                bleedMargin: 5
            },
            left: 0,
            right: '10%',
            top: 0,
            bottom: 0
        }]
    };
    if (option && typeof option === "object") {
        pieChart.setOption(option, true);
    }
    pieChart.on('click',function(params){
            var name = params.name;
            postit(name);
            })
</script>

<script>
    var dom = document.getElementById("stack");
    var stackChart = echarts.init(dom);
    var app = {};
    option = null;
    option = {
        dataset: {
            source: [
                ['score', 'amount', 'product'],
                [89.3, 58212, 'Matcha Latte'],
                [57.1, 78254, 'Milk Tea'],
                [74.4, 41032, 'Cheese Cocoa'],
                [50.1, 12755, 'Cheese Brownie'],
                [89.7, 20145, 'Matcha Cocoa'],
                [68.1, 79146, 'Tea'],
                [19.6, 91852, 'Orange Juice'],
                [10.6, 101852, 'Lemon Juice'],
                [32.7, 20112, 'Walnut Brownie']
            ]
        },
        grid: {containLabel: true},
        xAxis: {name: 'amount'},
        yAxis: {type: 'category'},
        visualMap: {
            orient: 'horizontal',
            left: 'center',
            min: 10,
            max: 100,
            text: ['High Score', 'Low Score'],
            // Map the score column to color
            dimension: 0,
            inRange: {
                color: ['#D7DA8B', '#E15457']
            }
        },
        series: [
            {
                type: 'bar',
                encode: {
                    // Map the "amount" column to X axis.
                    x: 'amount',
                    // Map the "product" column to Y axis
                    y: 'product'
                }
            }
        ]
    };
    if (option && typeof option === "object") {
        stackChart.setOption(option, true);
    }
    stackChart.on('click',function(params){
            var name = params.name;
            postit(name);
            })

</script>

<script>
    function postit(data) {
        $.post(
            "/getdata/",
            {"type": "date","data":data},
            function (result) {
                console.log("收到！收到！")
            })
    }
    function postit2() {
        $.post(
            "/getdata/",
            {"type": "date2"},
            function (result) {
                $("#calendar").html(result)
            })
    }
</script>

</body>
</html>